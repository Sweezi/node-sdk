import t from"axios";const e="https://my.sweezi.pt/api";let r=null,s=null;const a=(t,e,r=!1)=>r?{headers:{authorization:"Bearer "+t,"content-type":"multipart/form-data"}}:e?{headers:{authorization:"Bearer "+t,"selected-page":e}}:{headers:{authorization:"Bearer "+t}},i=async(a,i)=>{try{const c=await t.post(e+"/authentication/request-token",{clientId:a,secret:i});r=c.data.token,s=c.data.expireDate}catch(t){return t}},c=()=>{const t=Date.now();return t>s||t+5e3>s};class n{constructor(t,e,r,s,a,i){this.contactName=t,this.email=e,this.items=i,this.receiverAddress=s,this.serviceId=r,this.shipperAddress=a}}class h{constructor(t,e,r,s,a,i){this.description=t,this.height=e,this.length=r,this.quantity=s,this.weight=a,this.width=i}}class l{constructor(t,e,r,s,a,i){this.city=t,this.countryId=e,this.postalCode=r,this.state=s,this.street=a,this.street2=i}}export default class{constructor(t,e){this.clientId=t,this.clientSecret=e}async getAllOrders(s,n="",h="id",l="asc",o=0,d=20){(null===r||c())&&await i(this.clientId,this.clientSecret);try{const i=await t.get(((t,r,s,a,i,c)=>{let n=`?_start=${i}&_limit=${c}`;return n+=r?"&_q="+r:"",n+=s?`&_sort=${s}&_order=${a}`:"",`${e}/stores/${t}/orders${n}`})(s,n,h,l,o,d),a(r)),{data:c}=i;return c}catch(t){return t}}async getOrder(s,n){(null===r||c())&&await i(this.clientId,this.clientSecret);try{const i=await t.get(((t,r)=>`${e}/stores/${t}/orders/${r}`)(s,n),a(r)),{data:c}=i;return c}catch(t){return t}}async createOrder(s,n){(null===r||c())&&await i(this.clientId,this.clientSecret);try{const i=await t.post((t=>`${e}/stores/${t}/orders`)(s),n,a(r)),{data:c}=i;return c}catch(t){return t}}async updateOrder(s,n,h){(null===r||c())&&await i(this.clientId,this.clientSecret);try{const i=await t.put(((t,r)=>`${e}/stores/${t}/orders/${r}`)(s,n),h,a(r)),{data:c}=i;return c}catch(t){return t}}async getCountries(){(null===r||c())&&await i(this.clientId,this.clientSecret);try{const s=await t.get(e+"/countries",a(r)),{data:i}=s;return i}catch(t){return t}}async getServices(s){(null===r||c())&&await i(this.clientId,this.clientSecret);try{const i=await t.get((t=>`${e}/plans/${t}/services`)(s),a(r)),{data:c}=i;return c}catch(t){return t}}async getMyStores(){(null===r||c())&&await i(this.clientId,this.clientSecret);try{const s=await t.get(e+"/stores",a(r)),{data:i}=s;return i}catch(t){return t}}async getMyStoreAddress(s){(null===r||c())&&await i(this.clientId,this.clientSecret);try{const i=await t.get((t=>`${e}/stores/${t}`)(s),a(r)),{data:c}=i;return c.address}catch(t){return t}}async getMySweeziOrders(s,n){(null===r||c())&&await i(this.clientId,this.clientSecret);try{const i=await t.get(((t,r)=>`${e}/stores/${t}/sweezi-orders${r?`?_corder=${r}&_sort=id`:""}`)(s,n),a(r)),{data:c}=i;return c}catch(t){return t}}async getMySweeziOrderTracking(s,n){(null===r||c())&&await i(this.clientId,this.clientSecret);try{const i=await t.get(((t,r)=>`${e}/stores/${t}/orders/${r}/tracking`)(s,n),a(r)),{data:c}=i;return c}catch(t){return t}}async getTracking(s){(null===r||c())&&await i(this.clientId,this.clientSecret);try{const r=await t.get((t=>`${e}/tracking/${t}`)(s)),{data:a}=r;return a}catch(t){return t}}async getSweeziSpots(s,n){(null===r||c())&&await i(this.clientId,this.clientSecret);try{const i=await t.get(((t,r)=>`${e}/pick-me/${t}/${r}`)(s,n),a(r)),{data:c}=i;return c}catch(t){return t}}}export{l as Address,h as Item,n as Order};
